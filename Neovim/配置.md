# Neovim配置

### 文件目录

```shell
nvim
├── init.lua
└── lua
    ├── colorscheme.lua
    ├── config
    │   └── nvim-cmp.lua
    ├── keymaps.lua
    ├── lsp.lua
    ├── options.lua
    └── plugins.lua

```

- `init.lua`为`Nvim`配置的 Entry point，我们主要用来导入其他 `*.lua` 文件
  
  - `colorscheme.lua` 配置主题
  - `keymaps.lua` 配置按键映射
  - `lsp.lua` 配置 LSP
  - `options.lua` 配置选项
  - `plugins.lua` 配置插件

- `config` 用于**存放各种插件自身的配置**，文件名为插件的名字，这样比较好找。*这里的 `nvim-cmp.lua` 就是 `nvim-cmp` 插件的配置文件*

- `lua` 目录。当我们在 Lua 里面调用`require`加载模块（文件）的时候，它会自动在`lua`
  
  文件夹里面进行搜索

  - **将路径分隔符从 `/` 替换为 `.`，然后去掉 `.lua` 后缀就得到了 `require` 的参数格式**
  - *比如要导入上面的 `nvim-cmp.lua` 文件，可以用 `require('config.nvim-cmp')`*

### 选项配置

主要用到的就是 `vim.g`、`vim.opt`、`vim.cmd` 等，我制造了一个快速参照对比的表格

| In vim            | In Nvim             | Note                           |
| ----------------- | ------------------- | ------------------------------ |
| `let g:foo = bar` | `vim.g.foo = bar`   | set foo` = `vim.opt.foo = true |
|                   |                     |                                |
| `set foo = bar`   | `vim.opt.foo = bar` |                                |

| `set foo = bar` | `vim.opt.foo = bar` |
| --------------- | ------------------- |
|                 |                     |

### 按键配置

在 `Nvim` 里面进行按键绑定的语法如下，具体的解释可以看 `:h vim.keymap.set`

```lua
vim.keymap.set(<mode>, <key>, <action>, <opts>)
```

## 从零开始配置Nvim

> **配置文件编辑保存之后，重启 `Nvim` 就能看到效果，后面默认每次小章节配置完成后就重启**

### 选项配置

选项配置：

- 默认采用系统剪贴板，同时支持鼠标操控 `Nvim`
- Tab 和空格的换算
- UI 界面
- “智能”搜索

新建 `~/.config/nvim/lua/options.lua` 文件并加入如下内容

```lua
-- Hint: use `:h <option>` to figure out the meaning if needed
vim.opt.clipboard = 'unnamedplus' -- use system clipboard
vim.opt.completeopt = { 'menu', 'menuone', 'noselect' }
vim.opt.mouse = 'a' -- allow the mouse to be used in Nvim

-- Tab
vim.opt.tabstop = 4 -- number of visual spaces per TAB
vim.opt.softtabstop = 4 -- number of spacesin tab when editing
vim.opt.shiftwidth = 4 -- insert 4 spaces on a tab
vim.opt.expandtab = true -- tabs are spaces, mainly because of python

-- UI config
vim.opt.number = true -- show absolute number
vim.opt.relativenumber = true -- add numbers to each line on the left side
vim.opt.cursorline = true -- highlight cursor line underneath the cursor horizontally
vim.opt.splitbelow = true -- open new vertical split bottom
vim.opt.splitright = true -- open new horizontal splits right
-- vim.opt.termguicolors = true        -- enabl 24-bit RGB color in the TUI
vim.opt.showmode = false -- we are experienced, wo don't need the "-- INSERT --" mode hint

-- Searching
vim.opt.incsearch = true -- search as characters are entered
vim.opt.hlsearch = false -- do not highlight matches
vim.opt.ignorecase = true -- ignore case in searches by default
vim.opt.smartcase = true -- but make it case sensitive if an uppercase is entered

```

