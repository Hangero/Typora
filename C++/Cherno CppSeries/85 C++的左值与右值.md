## C++的左值与右值

1.左值：

> 有地址 数值 有存储空间的值，往往长期存在； 左值是**由某种存储支持的变量**；**左值有地址和值**，可以出现在赋值运算符左边或者右边。

2.左值引用:

> 左值引用仅仅接受左值，除非用了const兼容（ 非const的左值引用只接受左值 ） 所以C++常用**常量**引用。**因为它们兼容临时的右值和实际存在的左值变量**

3.右值：

> 是**临时量**，无地址（或者说有地址但访问不到，它只是一个临时量） 没有存储空间的短暂存在的值 。

4.右值引用：

> 右值引用不能绑定到左值 可以通过常引用或者右值引用延长右值的生命周期 “有名字的右值引用是左值”

5.右值引用的优势：**优化**

> 如果我们知道传入的是一个临时对象的话，那么我们就不需要担心它们是否活着，是否完整，是否拷贝。我们可以简单地偷它的资源，给到特定的对象，或者其他地方使用它们。因为我们知道它是暂时的，它不会存在很长时间 而如果如上使用const string& str，虽然可以兼容右值，但是却不能从这个字符串中窃取任何东西！因为这个str可能会在很多函数中使用，不可乱修改！（所以才加了const）

6.在给函数形参列表传参时，有四种情况：

```cpp
#include<iostream>
void PrintName(std::string name) // 可接受左值和右值
{
    std::cout<<name<<std::endl;
}
void PrintName(std::string& name) // 只接受左值引用，不接受右值
{
    std::cout << name << std::endl;
}
void PrintName(const std::string& name) // 接受左值和右值，把右值当作const lvalue&
{
    std::cout << name << std::endl;
}
void PrintName(std::string&& name) // 接受右值引用
{
    std::cout << name << std::endl;
}
int main()
{
    std::string firstName = "yang";
    std::string lastName = "dingchao";
    std::string fullName = firstName + lastName; //右边的表达式是个右值。
    PrintName(fullName);
    PrintName(firstName+lastName);
    std::cin.get();
```

7.cherno的演示代码如下：

```cpp
int GetValue(){
   return 10 ;
}


int main{
   int i =10;
   int j = GetValue();
   
   GetValue()=10;//错误
    
}
```



```cpp
#include <iostream>

int &GetValue()
{ // 左值引用
    //为值提供存储空间
    static int value = 10;
    return value;
}

void SetValue(int value) {}

void PrintName(std::string &name)
{ // 非const的左值引用只接受左值
    std::cout << "[lvalue]" << name << std::endl;
}

void PrintName(const std::string &&name)
{ // 右值引用不能绑定到左值
    std::cout << "[rvalue]" << name << std::endl;
}

int main()
{
    int i = GetValue();
    GetValue() = 5;

    SetValue(i);  // 左值参数调用
    SetValue(10); // 右值参数调用，当函数被调时，这个右值会被用来创建一个左值

    // 关于const，const引用可以同时接受左值和右值
    // int& a = 10; // 不能用左值作为右值的引用
    const int &a = 10; // 通过创建一个左值实现

    std::string firstName = "Yan";
    std::string lastName = "Chernikov";
    std::string fullname = firstName + lastName;
    PrintName(fullname);             // 接受左值
    PrintName(firstName + lastName); // 接受右值

    return 0;
}
```