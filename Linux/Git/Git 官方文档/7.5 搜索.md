# 搜索

## Git Grep

你还可以使用 `--and` 标志来查看复杂的字符串组合，它确保了多个匹配出现在同一文本行中。 比如，我们要查看在旧版本 1.8.0 的 Git 代码库中定义了常量名包含 “LINK” 或者 “BUF_MAX” 这两个字符串的行 （这里也用到了 `--break` 和 `--heading` 选项来使输出更加容易阅读）。

```bash
$ git grep --break --heading \
    -n -e '#define' --and \( -e LINK -e BUF_MAX \) v1.8.0
v1.8.0:builtin/index-pack.c
62:#define FLAG_LINK (1u<<20)

v1.8.0:cache.h
73:#define S_IFGITLINK  0160000
74:#define S_ISGITLINK(m)       (((m) & S_IFMT) == S_IFGITLINK)

v1.8.0:environment.c
54:#define OBJECT_CREATION_MODE OBJECT_CREATION_USES_HARDLINKS

v1.8.0:strbuf.c
326:#define STRBUF_MAXLINK (2*PATH_MAX)

v1.8.0:symlinks.c
53:#define FL_SYMLINK  (1 << 2)

v1.8.0:zlib.c
30:/* #define ZLIB_BUF_MAX ((uInt)-1) */
31:#define ZLIB_BUF_MAX ((uInt) 1024 * 1024 * 1024) /* 1GB */
```

相比于一些常用的搜索命令比如 `grep` 和 `ack`，`git grep` 命令有一些的优点。 第一就是速度非常快，第二是你不仅仅可以可以搜索工作目录，还可以搜索任意的 Git 树。 在上一个例子中，我们在一个旧版本的 Git 源代码中查找，而不是当前检出的版本。

> `git grep --break --heading -n -e '#define' --and \( -e LINK -e BUF_MAX \) v1.8.0` 是一个 Git 命令，用于在代码库中搜索满足多个条件的文本模式，并显示匹配的行号、文件名以及匹配行所在的代码块。
>
> 具体来说，各选项的含义如下：
>
> - `--break` 选项用于在匹配行之间插入空行，以增加可读性。
> - `--heading` 选项用于在每个匹配文件的搜索结果之前显示文件名和路径。
> - `-n` 选项用于显示匹配行的行号。
> - `-e '#define'` 用于指定第一个搜索模式，即要匹配的文本模式为 `#define`。
> - `--and` 用于指定多个条件之间的逻辑关系，表示要同时满足所有条件。
> - `\( -e LINK -e BUF_MAX \)` 用于指定要搜索的第二个条件，即要匹配的文本模式为 `LINK` 或 `BUF_MAX`。
> - `v1.8.0` 是要搜索的特定版本号，即要搜索的 Git 版本号为 `v1.8.0`。
>
> \( -e LINK -e BUF_MAX \) 用于指定要搜索的第二个条件，即要匹配的文本模式为 LINK 或 BUF_MAX。
> v1.8.0 是要搜索的特定版本号，即要搜索的 Git 版本号为 v1.8.0。
> 使用上述命令将会在 Git 代码库中搜索满足以下条件的内容：
>
> 包含 #define 的行；
> 同时包含 LINK 或 BUF_MAX 的行；
> 版本号为 v1.8.0。
> 搜索结果将以文件名、路径、匹配行号和匹配行的代码块形式显示，方便你快速定位到相关的代码片段。
>
> 请确保在执行该命令之前，你已经在正确的 Git 代码库目录中，并且已经初始化了 Git。使用上述命令将会在 Git 代码库中搜索满足以下条件的内容：
>
> - 包含 `#define` 的行；
> - 同时包含 `LINK` 或 `BUF_MAX` 的行；
> - 版本号为 `v1.8.0`。
>
> 搜索结果将以文件名、路径、匹配行号和匹配行的代码块形式显示，方便你快速定位到相关的代码片段。
>
> 请确保在执行该命令之前，你已经在正确的 Git 代码库目录中，并且已经初始化了 Git。



## Git日志搜索

或许你不想知道某一项在 **哪里** ，而是想知道是什么 **时候** 存在或者引入的。 `git log` 命令有许多强大的工具可以通过提交信息甚至是 diff 的内容来找到某个特定的提交。